<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<f:facet name="first">
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<!-- Meta, title, CSS, favicons, etc. -->
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
	</f:facet>

	<title>Vagas On Line</title>

	<h:outputStylesheet library="css" name="bootstrap.min.css" />
	<h:outputStylesheet library="css" name="form.css" />
	<h:outputScript target="body" library="js" name="bootstrap.min.js" />

	<script type="text/javascript">

	 	 navigator.geolocation.getCurrentPosition(locationSuccess, locationFail); 
		 function locationSuccess(position) {
				 latitude = position.coords.latitude;
				 longitude = position.coords.longitude;
				 passou([ {
	                 name : 'lat',
	                 value : latitude
	          	}, {
	                 name : 'long',
	                 value : longitude          
	          	} ]);
		  }
	
		  function locationFail() {
				var msg = 'Não foi possível resgatar a localização'; 
				alert(msg);
				passou([ {
	                 name : 'lat',
	                 value : ''
	          	}, {
	                 name : 'long',
	                 value : ''          
	          	} ]);
		  }
	
		  function handleLoginRequest(xhr, status, args) {
		        if(args.validationFailed || !args.loggedIn) {
		            PF('dlg').jq.effect("shake", {times:5}, 100);
		        }
		        else {
		            PF('dlg').hide();
		            $('#loginLink').fadeOut();
		        }
		  }
	</script>

</h:head>

<h:body>

	<div class="container" style="margin-top: 10%">
		<div class="row">
			<div class="col-md-4 col-md-offset-4">
				<div class="panel panel-default">
					<div class="panel-heading">
						<h3 class="panel-title">Vagas On Line</h3>
					</div>
					<div class="panel-body">
						<h:form accept-charset="UTF-8" role="form">
							<p:growl id="growl" sticky="true" showDetail="true" life="3000" />
							<fieldset>
								<div class="form-group">
									<p:inputText id="username" value="#{usuarioBean.username}" styleClass="form-control" required="true" label="username" />
									<p:watermark for="username" value="Login" id="place" />
								</div>
								<div class="form-group">
									<p:password id="password" value="#{usuarioBean.password}"  styleClass="form-control" required="true" label="password" title="Senha" />
									<p:watermark for="password" value="Senha" id="place2" />
								</div>
								<h:commandLink action="#{usuarioBean.conectar}"
									styleClass="btn btn-lg btn-success btn-block"
									value="Login" />
								<h:commandLink />
							</fieldset>
						</h:form>
						<h:form>
						<hr />
						<center>
							<h4>OR</h4>
						</center>
							<p:remoteCommand name="passou" process="@this" actionListener="#{mb.setLocalizacaoAtual}" />
							<h:commandLink action="#{usuarioBean.conectarFacebook}"
								styleClass="btn btn-lg btn-facebook btn-block"
								value="Login com Facebook" />
							<h:commandLink />
						</h:form>
					</div>
				</div>
			</div>
		</div>
	</div>

</h:body>
</html>